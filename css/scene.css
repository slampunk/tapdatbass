.visualisation {
  position: absolute;
  width: 80%;
  height: 80%;
  left: 10%;
  top: 10%;
  transform: rotateX(-15deg) translateZ(30rem) translateY(-7rem);
  transform-style: preserve-3d;
  z-index: 1;
  opacity: 0;
  pointer-events: none;
  transition: transform 3s, opacity 0.5s;
}

.ready .visualisation,
.is-playing .visualisation {
  opacity: 1;
  transform: rotateX(-15deg) translateZ(10rem) translateY(-4rem);
}

.is-playing .visualisation {
  transform: rotateX(-15deg);
}

.rotator {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  transform-style: preserve-3d;
  animation: spin 10s infinite linear;
}
.rotator div {
  transform-style: preserve-3d;
  width: 8rem;
  height: 8rem;
  position: absolute;
  top: 50%;
  left: 50%;
  margin: -4rem;
  transition: all 0.05s;
  border-radius: 50%;
  background: white;
}

.visualisation.shake {
  animation: shake 0.1s infinite linear;
}

.rotator > div:nth-child(1) {
		transform: rotateY(0deg) translateZ(7rem);
}
.rotator.beat > div:nth-child(1) {
		transform: rotateY(0deg) translateZ(12rem);
}
.rotator > div:nth-child(2) {
		transform: rotateY(90deg) translateZ(7rem);
}
.rotator.beat > div:nth-child(2) {
		transform: rotateY(90deg) translateZ(12rem);
}
.rotator > div:nth-child(3) {
		transform: rotateY(180deg) translateZ(7rem);
}
.rotator.beat > div:nth-child(3) {
		transform: rotateY(180deg) translateZ(12rem);
}
.rotator > div:nth-child(4) {
		transform: rotateY(270deg) translateZ(7rem);
}
.rotator.beat > div:nth-child(4) {
		transform: rotateY(270deg) translateZ(12rem);
}
.rotator > div:nth-child(5) {
		transform: rotateX(90deg) translateZ(7rem);
}
.rotator.beat > div:nth-child(5) {
		transform: rotateX(90deg) translateZ(12rem);
}
.rotator > div:nth-child(6) {
		transform: rotateX(270deg) translateZ(7rem);
}
.rotator.beat > div:nth-child(6) {
		transform: rotateX(270deg) translateZ(12rem);
}

@keyframes spin {
  0% {
    transform: rotateY(0);
  }
  100% {
    transform: rotateY(360deg);
  }
}

@keyframes shake {
  0% {
    transform: rotateX(-15deg);
  }
  25% {
    transform: rotateX(-15deg) translateY(10px);
  }
  75% {
    transform: rotateX(-15deg) translateY(-10px);
  }
  100% {
    transform: rotateX(-15deg);
  }
}
